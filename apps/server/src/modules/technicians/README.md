# Technicians Module

Database CRUD operations for technician data management.

## ğŸ“ Structure

```
technicians/
â”œâ”€â”€ technicians.repository.ts  # All DB operations against the `technicians` table
â””â”€â”€ index.ts                   # Re-exports
```

## ğŸ—„ï¸ Table Schema

| Column             | Type      | Notes                                      |
|--------------------|-----------|--------------------------------------------|
| `id`               | `uuid`    | Primary key, auto-generated by Postgres     |
| `first_name`       | `text`    | Required                                   |
| `last_name`        | `text`    | Required                                   |
| `email`            | `text`    | Required, unique                           |
| `phone`            | `text`    | Optional                                   |
| `is_available`     | `boolean` | Defaults to `false` on creation            |
| `category_id`      | `uuid`    | Foreign key â†’ `categories(id)`             |
| `criminal_record`  | `text`    | Public URL from Supabase Storage           |
| `birth_certificate`| `text`    | Public URL from Supabase Storage           |
| `national_id`      | `text`    | Public URL from Supabase Storage           |
| `created_at`       | `timestamptz` | Auto-generated by Postgres             |

## ğŸ”§ Repository Methods

| Method                        | Description                                              |
|-------------------------------|----------------------------------------------------------|
| `createTechnician(data)`      | Inserts a new technician row                             |
| `getTechnicianById(id)`       | Fetches a technician by UUID                             |
| `getTechnicianByEmail(email)` | Fetches a technician by email, returns `null` if not found |
| `emailExists(email)`          | Returns `true` if a technician with this email exists    |
| `updateTechnician(id, data)`  | Updates technician fields                                |
| `deleteTechnician(id)`        | Deletes a technician by UUID                             |

## ğŸ“ Notes

- All DB operations use the **service role client** (`supabaseAdmin`) to bypass RLS.
- `emailExists()` uses a `count` query with `head: true` for efficiency (no rows returned).
- `is_available` is always set to `false` on creation â€” technicians must be verified before being made available.
